import{A as e,d as a,av as t,bW as l,o as s,aB as n,bX as o,bY as r,b as u,aE as i,h as d,_ as v,j as c,as as b,a as p,r as f,B as m,au as h,C as g,aA as y,ai as x,c as w,V as C,e as k,H as N,n as P,g as $,S as E,bZ as R,b_ as S,b$ as T,bT as B,W as V,E as A,c0 as _,at as F,F as j,G as W,ab as L,I as z,bh as K,f as M,c1 as O,U as I,k as U,p as X,aj as Y,P as D,c2 as H,a8 as q,aa as G,v as Z,s as J}from"./index.DXN_QHOM.js";import{c as Q,r as ee,o as ae}from"./raf.CwfIUan6.js";import{c as te,a as le}from"./strings.DYJ9Iq14.js";const se=(r,u)=>{const i=e({}),d=e([]),v=new WeakMap,c=()=>{d.value=((e,a,t)=>n(e.subTree).filter(e=>{var t;return o(e)&&(null==(t=e.type)?void 0:t.name)===a&&!!e.component}).map(e=>e.component.uid).map(e=>t[e]).filter(e=>!!e))(r,u,i.value)},b=e=>e.render(),p=a({setup:(e,{slots:a})=>()=>(c(),a.default?t(b,{render:a.default}):null)});return{children:d,addChild:e=>{i.value[e.uid]=e,l(i),s(()=>{const a=e.getVnode().el,t=a.parentNode;if(!v.has(t)){v.set(t,[]);const e=t.insertBefore.bind(t);t.insertBefore=(a,s)=>(v.get(t).some(e=>a===e||s===e)&&l(i),e(a,s))}v.get(t).push(a)})},removeChild:e=>{delete i.value[e.uid],l(i);const a=e.getVnode().el,t=a.parentNode,s=v.get(t),n=s.indexOf(a);s.splice(n,1)},ChildrenSorter:p}},ne="horizontal",oe="vertical",re={[ne]:"deltaX",[oe]:"deltaY"},ue=Symbol("tabsRootContextKey"),ie=u({tabs:{type:d(Array),default:()=>i([])},tabRefs:{type:d(Object),default:()=>i({})}}),de="ElTabBar";var ve=v(a({name:de,__name:"tab-bar",props:ie,setup(e,{expose:a}){const t=e,l=c(ue);l||b(de,"<el-tabs><el-tab-bar /></el-tabs>");const s=p("tabs"),n=f(),o=f(),r=m(()=>{var e;return h(l.props.defaultValue)||Boolean(null==(e=o.value)?void 0:e.transform)}),u=()=>o.value=(()=>{let e=0,a=0;const s=["top","bottom"].includes(l.props.tabPosition)?"width":"height",n="width"===s?"x":"y",o="x"===n?"left":"top";return t.tabs.every(l=>{if(h(l.paneName))return!1;const n=t.tabRefs[l.paneName];if(!n)return!1;if(!l.active)return!0;e=n[`offset${te(o)}`],a=n[`client${te(s)}`];const r=window.getComputedStyle(n);return"width"===s&&(a-=Number.parseFloat(r.paddingLeft)+Number.parseFloat(r.paddingRight),e+=Number.parseFloat(r.paddingLeft)),!1}),{[s]:`${a}px`,transform:`translate${te(n)}(${e}px)`}})(),i=[];g(()=>t.tabs,async()=>{await E(),u(),i.forEach(e=>e.stop()),i.length=0,Object.values(t.tabRefs).forEach(e=>{i.push(y(e,u))})},{immediate:!0});const d=y(n,()=>u());return x(()=>{i.forEach(e=>e.stop()),i.length=0,d.stop()}),a({ref:n,update:u}),(e,a)=>r.value?(k(),w("div",{key:0,ref_key:"barRef",ref:n,class:P([$(s).e("active-bar"),$(s).is($(l).props.tabPosition)]),style:N(o.value)},null,6)):C("v-if",!0)}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const ce=u({panes:{type:d(Array),default:()=>i([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean,tabindex:{type:[String,Number],default:void 0}}),be="ElTabNav",pe=a({name:be,props:ce,emits:{tabClick:(e,a,t)=>t instanceof Event,tabRemove:(e,a)=>a instanceof Event},setup(a,{expose:t,emit:n}){const o=c(ue);o||b(be,"<el-tabs><tab-nav /></el-tabs>");const u=p("tabs"),i=R(),d=S(),v=f(),h=f(),x=f(),w=f({}),C=f(),k=f(!1),N=f(0),P=f(!1),$=f(!0),z=e(),K=m(()=>["top","bottom"].includes(o.props.tabPosition)),M=m(()=>K.value?"width":"height"),O=m(()=>({transform:`translate${"width"===M.value?"X":"Y"}(-${N.value}px)`})),{width:I,height:U}=T(v),{width:X,height:Y}=T(h,{width:0,height:0},{box:"border-box"}),D=m(()=>K.value?I.value:U.value),H=m(()=>K.value?X.value:Y.value),{onWheel:q}=(({atEndEdge:e,atStartEdge:a,layout:t},l)=>{let s,n=0;const o=t=>t<0&&a.value||t>0&&e.value;return{hasReachedEdge:o,onWheel:e=>{Q(s);const a=e[re[t.value]];o(n)&&o(n+a)||(n+=a,r()||e.preventDefault(),s=ee(()=>{l(n),n=0}))}}})({atStartEdge:m(()=>N.value<=0),atEndEdge:m(()=>H.value-N.value<=D.value),layout:m(()=>K.value?"horizontal":"vertical")},e=>{N.value=le(N.value+e,0,H.value-D.value)}),G=()=>{if(!v.value)return;const e=v.value[`offset${te(M.value)}`],a=N.value;if(!a)return;const t=a>e?a-e:0;N.value=t},Z=()=>{if(!v.value||!h.value)return;const e=h.value[`offset${te(M.value)}`],a=v.value[`offset${te(M.value)}`],t=N.value;if(e-t<=a)return;const l=e-t>2*a?t+a:e-a;N.value=l},J=async()=>{const e=h.value;if(!(k.value&&x.value&&v.value&&e))return;await E();const t=w.value[a.currentName];if(!t)return;const l=v.value,s=t.getBoundingClientRect(),n=l.getBoundingClientRect(),o=K.value?e.offsetWidth-n.width:e.offsetHeight-n.height,r=N.value;let u=r;K.value?(s.left<n.left&&(u=r-(n.left-s.left)),s.right>n.right&&(u=r+s.right-n.right)):(s.top<n.top&&(u=r-(n.top-s.top)),s.bottom>n.bottom&&(u=r+(s.bottom-n.bottom))),u=Math.max(u,0),N.value=Math.min(u,o)},ae=()=>{var e;if(!h.value||!v.value)return;a.stretch&&(null==(e=C.value)||e.update());const t=h.value[`offset${te(M.value)}`],l=v.value[`offset${te(M.value)}`],s=N.value;l<t?(k.value=k.value||{},k.value.prev=s,k.value.next=s+l<t,t-s<l&&(N.value=t-l)):(k.value=!1,s>0&&(N.value=0))},se=e=>{let a=0;switch(j(e)){case W.left:case W.up:a=-1;break;case W.right:case W.down:a=1;break;default:return}const t=Array.from(e.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let l=t.indexOf(e.target)+a;l<0?l=t.length-1:l>=t.length&&(l=0),t[l].focus({preventScroll:!0}),t[l].click(),ne()},ne=()=>{$.value&&(P.value=!0)},oe=()=>P.value=!1;return g(i,e=>{"hidden"===e?$.value=!1:"visible"===e&&setTimeout(()=>$.value=!0,50)}),g(d,e=>{e?setTimeout(()=>$.value=!0,50):$.value=!1}),y(x,()=>{ee(ae)}),s(()=>setTimeout(()=>J(),0)),B(()=>ae()),t({scrollToActiveTab:J,removeFocus:oe,focusActiveTab:async()=>{await E();const e=w.value[a.currentName];null==e||e.focus({preventScroll:!0})},tabListRef:h,tabBarRef:C,scheduleRender:()=>l(z)}),()=>{const e=k.value?[V("span",{class:[u.e("nav-prev"),u.is("disabled",!k.value.prev)],onClick:G},[V(A,null,{default:()=>[V(_,null,null)]})]),V("span",{class:[u.e("nav-next"),u.is("disabled",!k.value.next)],onClick:Z},[V(A,null,{default:()=>[V(F,null,null)]})])]:null,t=a.panes.map((e,t)=>{var l,s,r,i,d;const v=e.uid,c=e.props.disabled,b=null!=(s=null!=(l=e.props.name)?l:e.index)?s:`${t}`,p=!c&&(e.isClosable||!1!==e.props.closable&&a.editable);e.index=`${t}`;const f=p?V(A,{class:"is-icon-close",onClick:a=>n("tabRemove",e,a)},{default:()=>[V(L,null,null)]}):null,m=(null==(i=(r=e.slots).label)?void 0:i.call(r))||e.props.label,h=!c&&e.active?null!=(d=a.tabindex)?d:o.props.tabindex:-1;return V("div",{ref:e=>((e,a)=>{w.value[a]=e})(e,b),class:[u.e("item"),u.is(o.props.tabPosition),u.is("active",e.active),u.is("disabled",c),u.is("closable",p),u.is("focus",P.value)],id:`tab-${b}`,key:`tab-${v}`,"aria-controls":`pane-${b}`,role:"tab","aria-selected":e.active,tabindex:h,onFocus:()=>ne(),onBlur:()=>oe(),onClick:a=>{oe(),n("tabClick",e,b,a)},onKeydown:a=>{const t=j(a);!p||t!==W.delete&&t!==W.backspace||n("tabRemove",e,a)}},[m,f])});return z.value,V("div",{ref:x,class:[u.e("nav-wrap"),u.is("scrollable",!!k.value),u.is(o.props.tabPosition)]},[e,V("div",{class:u.e("nav-scroll"),ref:v},[a.panes.length>0?V("div",{class:[u.e("nav"),u.is(o.props.tabPosition),u.is("stretch",a.stretch&&["top","bottom"].includes(o.props.tabPosition))],ref:h,style:O.value,role:"tablist",onKeydown:se,onWheel:q},[a.type?null:V(ve,{ref:C,tabs:[...a.panes],tabRefs:w.value},null),t]):null])])}}}),fe=u({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},defaultValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:d(Function),default:()=>!0},stretch:Boolean,tabindex:{type:[String,Number],default:0}}),me=e=>z(e)||K(e),he=a({name:"ElTabs",props:fe,emits:{[I]:e=>me(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>me(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>me(e),tabAdd:()=>!0},setup(e,{emit:a,slots:t,expose:l}){var s;const n=p("tabs"),o=m(()=>["left","right"].includes(e.tabPosition)),{children:r,addChild:u,removeChild:i,ChildrenSorter:d}=se(U(),"ElTabPane"),v=f(),c=f(null!=(s=h(e.modelValue)?e.defaultValue:e.modelValue)?s:"0"),b=async(t,l=!1)=>{var s,n,o,u;if(c.value!==t&&!h(t))try{let i;if(e.beforeLeave){const a=e.beforeLeave(t,c.value);i=a instanceof Promise?await a:a}else i=!0;if(!1!==i){const e=null==(s=r.value.find(e=>e.paneName===c.value))?void 0:s.isFocusInsidePane();c.value=t,l&&(a(I,t),a("tabChange",t)),null==(o=null==(n=v.value)?void 0:n.removeFocus)||o.call(n),e&&(null==(u=v.value)||u.focusActiveTab())}}catch(i){}},y=(e,t,l)=>{e.props.disabled||(a("tabClick",e,l),b(t,!0))},x=(e,t)=>{e.props.disabled||h(e.props.name)||(t.stopPropagation(),a("edit",e.props.name,"remove"),a("tabRemove",e.props.name))},w=()=>{a("edit",void 0,"add"),a("tabAdd")},C=e=>{const a=j(e);[W.enter,W.numpadEnter].includes(a)&&w()},k=a=>{const t=a.el.firstChild,l=["bottom","right"].includes(e.tabPosition)?a.children[0].el:a.children[1].el;t!==l&&t.before(l)};return g(()=>e.modelValue,e=>b(e)),g(c,async()=>{var e;await E(),null==(e=v.value)||e.scrollToActiveTab()}),X(ue,{props:e,currentName:c,registerPane:u,unregisterPane:i,nav$:v}),l({currentName:c,get tabNavRef(){return ae(v.value,["scheduleRender"])}}),()=>{const a=t["add-icon"],l=e.editable||e.addable?V("div",{class:[n.e("new-tab"),o.value&&n.e("new-tab-vertical")],tabindex:e.tabindex,onClick:w,onKeydown:C},[a?M(t,"add-icon"):V(A,{class:n.is("icon-plus")},{default:()=>[V(O,null,null)]})]):null,s=V("div",{class:[n.e("header"),o.value&&n.e("header-vertical"),n.is(e.tabPosition)]},[V(d,null,{default:()=>V(pe,{ref:v,currentName:c.value,editable:e.editable,type:e.type,panes:r.value,stretch:e.stretch,onTabClick:y,onTabRemove:x},null),$stable:!0}),l]),u=V("div",{class:n.e("content")},[M(t,"default")]);return V("div",{class:[n.b(),n.m(e.tabPosition),{[n.m("card")]:"card"===e.type,[n.m("border-card")]:"border-card"===e.type}],onVnodeMounted:k,onVnodeUpdated:k},[u,s])}}}),ge=u({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),ye=["id","aria-hidden","aria-labelledby"],xe="ElTabPane";var we=v(a({name:xe,__name:"tab-pane",props:ge,setup(e){const a=e,t=U(),l=Y(),s=c(ue);s||b(xe,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const n=p("tab-pane"),o=f(),r=f(),u=m(()=>{var e;return null!=(e=a.closable)?e:s.props.closable}),i=m(()=>{var e;return s.currentName.value===(null!=(e=a.name)?e:r.value)}),d=f(i.value),v=m(()=>{var e;return null!=(e=a.name)?e:r.value}),h=m(()=>!a.lazy||d.value||i.value);g(i,e=>{e&&(d.value=!0)});const y=D({uid:t.uid,getVnode:()=>t.vnode,slots:l,props:a,paneName:v,active:i,index:r,isClosable:u,isFocusInsidePane:()=>{var e;return null==(e=o.value)?void 0:e.contains(document.activeElement)}});return s.registerPane(y),x(()=>{s.unregisterPane(y)}),H(()=>{var e;l.label&&(null==(e=s.nav$.value)||e.scheduleRender())}),(e,a)=>h.value?q((k(),w("div",{key:0,id:`pane-${v.value}`,ref_key:"paneRef",ref:o,class:P($(n).b()),role:"tabpanel","aria-hidden":!i.value,"aria-labelledby":`tab-${v.value}`},[M(e.$slots,"default")],10,ye)),[[G,i.value]]):C("v-if",!0)}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const Ce=Z(he,{TabPane:we}),ke=J(we);export{Ce as E,ke as a};
