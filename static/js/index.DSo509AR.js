import{d as e,r as a,b9 as s,aM as l,aN as r,aI as o,b0 as t,af as n,B as c,aO as i,M as d,o as u,c as p,l as m,W as g,g as f,b1 as h,b2 as v,a_ as w,w as b,t as x,aT as j,ae as _,X as y,ac as V,ad as C,an as K,ba as q,aY as k,e as E}from"./index.DXN_QHOM.js";import{E as z}from"./el-card.mNxyepFD.js";import{E as A,a as $}from"./el-form-item.CY1Mec0j.js";import{E as D}from"./el-image-viewer.CJ7gzcOs.js";import"./el-tooltip.l0sNRNKZ.js";import{E as I}from"./el-popper.Cm3EILGk.js";import{S as L}from"./index.BuGD4l3z.js";import{E as M}from"./el-tag.1RG9hi3Q.js";import{c as R,_ as U}from"./el-switch.tmb8darN.js";import{_ as B}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./castArray.Cr4sbcWt.js";import"./_baseClone.D0ydySKm.js";import"./index.CMfFCYHN.js";import"./debounce.7Ub-rcLP.js";import"./toNumber.CtQLJSNj.js";import"./el-scrollbar.Bt113zlt.js";import"./dropdown.BSfr7u2s.js";import"./refs.Cw5r5QN8.js";const N={class:"login-container"},O={class:"absolute-lt flex-x-end p-3 w-full"},T={class:"text-center relative"},G={class:"flex-y-center w-full"},H={class:"flex-y-center w-full"},S={class:"flex-y-center w-full"},F=B(e({__name:"index",setup(e){const B=a("");s().then(e=>{B.value=e.data}).catch(e=>{});const F=l(),J=r(),{t:W}=o(),X=a(J.theme===t.DARK),Y=a(!0),P=a(!1),Q=a(!1),Z=a(),ee=a(A),{height:ae}=n(),se=a({username:"",password:""}),le=c(()=>({username:[{required:!0,trigger:"blur",message:W("login.message.username.required")}],password:[{required:!0,trigger:"blur",message:W("login.message.password.required")},{min:6,message:W("login.message.password.min"),trigger:"blur"}],captchaCode:[{required:!0,trigger:"blur",message:W("login.message.captchaCode.required")}]}));function re(){q().then(({data:e})=>{se.value.captchaKey=e.captchaKey,Z.value=e.captchaBase64})}const oe=i();function te(){ee.value.validate(e=>{e&&(P.value=!0,F.login(se.value).then(()=>{const e=oe.query,a=e.redirect??"/",s=Object.keys(e).reduce((a,s)=>("redirect"!==s&&(a[s]=e[s]),a),{});k.push({path:a,query:s})}).catch(()=>{re()}).finally(()=>{P.value=!1}))})}const ne=()=>{const e=J.theme===t.DARK?t.LIGHT:t.DARK;J.changeTheme(e)};function ce(e){e instanceof KeyboardEvent&&(Q.value=e.getModifierState("CapsLock"))}return d(()=>{ae.value<600?Y.value=!1:Y.value=!0}),u(()=>{re()}),(e,a)=>{const s=R,l=U,r=M,o=L,t=y,n=$,c=I,i=D,d=C,u=A,q=z;return E(),p("div",N,[m("div",O,[g(s,{modelValue:f(X),"onUpdate:modelValue":a[0]||(a[0]=e=>w(X)?X.value=e:null),"inline-prompt":"","active-icon":f(v),"inactive-icon":f(h),onChange:ne},null,8,["modelValue","active-icon","inactive-icon"]),g(l,{class:"ml-2 cursor-pointer"})]),g(q,{class:"!border-none !bg-transparent !rounded-4% w-100 <sm:w-85"},{default:b(()=>[m("div",T,[m("h2",null,x(f(j).title),1),g(r,{class:"ml-2 absolute-rt"},{default:b(()=>[_(x(f(B)),1)]),_:1})]),g(u,{ref_key:"loginFormRef",ref:ee,model:f(se),rules:f(le),class:"login-form"},{default:b(()=>[g(n,{prop:"username"},{default:b(()=>[m("div",G,[g(o,{"icon-class":"user",class:"mx-2"}),g(t,{ref:"username",modelValue:f(se).username,"onUpdate:modelValue":a[1]||(a[1]=e=>f(se).username=e),placeholder:e.$t("login.username"),name:"username",size:"large",class:"h-[48px]"},null,8,["modelValue","placeholder"])])]),_:1}),g(c,{visible:f(Q),content:e.$t("login.capsLock"),placement:"right"},{default:b(()=>[g(n,{prop:"password"},{default:b(()=>[m("div",H,[g(o,{"icon-class":"lock",class:"mx-2"}),g(t,{modelValue:f(se).password,"onUpdate:modelValue":a[2]||(a[2]=e=>f(se).password=e),placeholder:e.$t("login.password"),type:"password",name:"password",onKeyup:[ce,V(te,["enter"])],size:"large",class:"h-[48px] pr-2","show-password":""},null,8,["modelValue","placeholder"])])]),_:1})]),_:1},8,["visible","content"]),g(n,{prop:"captchaCode"},{default:b(()=>[m("div",S,[g(o,{"icon-class":"captcha",class:"mx-2"}),g(t,{modelValue:f(se).captchaCode,"onUpdate:modelValue":a[3]||(a[3]=e=>f(se).captchaCode=e),"auto-complete":"off",size:"large",class:"flex-1",placeholder:e.$t("login.captchaCode"),onKeyup:V(te,["enter"])},null,8,["modelValue","placeholder"]),g(i,{onClick:re,src:f(Z),class:"rounded-tr-md rounded-br-md cursor-pointer h-[48px]"},null,8,["src"])])]),_:1}),g(d,{loading:f(P),type:"primary",size:"large",class:"w-full",onClick:K(te,["prevent"])},{default:b(()=>[_(x(e.$t("login.login")),1)]),_:1},8,["loading"])]),_:1},8,["model","rules"])]),_:1})])}}}),[["__scopeId","data-v-ba695567"]]);export{F as default};
